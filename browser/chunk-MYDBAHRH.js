import{b as ee,c as te,j as U,l as O}from"./chunk-XSQLX27A.js";import{$ as _,$a as h,A as F,Aa as T,E as M,Fb as N,Ga as a,Gb as Y,Ha as b,Hb as S,I as Z,Ka as q,Pa as m,Qa as Q,Sa as f,Ta as L,Ua as W,Va as X,W as v,Wa as r,Xa as s,Ya as g,Za as D,a as C,ab as x,b as k,bb as z,ca as w,cb as l,db as H,eb as u,ga as P,ha as I,hb as y,i as A,ia as V,j as J,ja as $,y as j}from"./chunk-ONFM3ZJE.js";var G=(()=>{let e=class e{get filtrosPais(){return this._filtrosPais}get nombre(){return this._nombre}set nombre(i){this._nombre=i}get continente(){return this._continente}set continente(i){this._continente.push(i)}constructor(){this._filtrosPais=new J({}),this._continente=[],this.updateFiltros()}updateFiltros(){let i=C(C({},this.nombre!==void 0&&{nombre:this.nombre}),this.continente!==void 0&&{continente:this.continente});Object.keys(i).length>0?this._filtrosPais.next(i):this._filtrosPais.next({})}resetFiltro(){this._continente=[],this.updateFiltros()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pe=(t,e)=>e.code;function me(t,e){if(t&1){let c=D();r(0,"div",15),h("click",function(){let o=P(c).$implicit,p=x(2);return I(p.buscarContinente(o.code))}),g(1,"img",16),r(2,"p"),l(3),s()()}if(t&2){let c=e.$implicit;a(1),m("src",c.imagen,T),a(2),u(" ",c.name," ")}}function de(t,e){if(t&1){let c=D();r(0,"div",10)(1,"div",11)(2,"h1",12),l(3,"Filtrar por continentes"),s(),r(4,"p",13),h("click",function(){P(c);let n=x();return I(n.resetFiltro())}),l(5,"Limpiar"),s()(),r(6,"div",14),W(7,me,4,2,"div",17,pe),s()()}if(t&2){let c=x();a(7),X(c.continentes)}}var ne=(()=>{let e=class e{constructor(i){this.filtrosPais=i,this.continentes=[],this.onSearch=new q,this.onSearchContinente=new q,this.continentesBuscar=[],this.showContinentes=!1,this.debouncer=new A}ngOnInit(){this.debouncer.pipe(Z(500)).subscribe(i=>this.onSearch.emit(i))}ngOnDestroy(){this.debouncer.unsubscribe()}onKeyPress(i){this.debouncer.next(i)}show(){this.showContinentes=!this.showContinentes}buscarContinente(i){this.filtrosPais.continente=i,this.continentesBuscar.push(i),this.onSearchContinente.emit(this.continentesBuscar)}resetFiltro(){this.filtrosPais.resetFiltro(),this.onKeyPress(this.filtrosPais.nombre||""),this.show()}};e.\u0275fac=function(n){return new(n||e)(b(G))},e.\u0275cmp=w({type:e,selectors:[["shared-buscador"]],inputs:{continentes:"continentes"},outputs:{onSearch:"onSearch",onSearchContinente:"onSearchContinente"},standalone:!0,features:[y],decls:12,vars:1,consts:[[1,"relative","flex","justify-between","bg-white","shadow-lg","w-full","rounded-full","p-3","pl-7"],[1,"flex","flex-col","w-full"],["for","buscar",1,"text-[20px]","text-[--gris-letra]"],["type","text","placeholder","Escribe el pais que deseas ver...","id","buscar",1,"w-full","focus:outline-none","focus:border-b-2","focus:border-[--celeste]",3,"keyup","click"],["txtInput",""],[1,"icon","bg-[--celeste]","rounded-full","px-5","flex","items-center","gap-2","text-white"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","white"],["d","M14.6781 12.929C15.8884 11.2773 16.4305 9.22939 16.1959 7.19508C15.9613 5.16077 14.9673 3.29006 13.4128 1.95721C11.8583 0.624365 9.85794 -0.0723278 7.81187 0.00651878C5.76581 0.0853654 3.82496 0.933936 2.37762 2.38246C0.930277 3.83099 0.0831823 5.77265 0.00580795 7.81898C-0.0715664 9.86531 0.626485 11.8654 1.96031 13.4191C3.29413 14.9728 5.16536 15.9656 7.19963 16.1987C9.23389 16.4319 11.2812 15.8883 12.9319 14.6766H12.9306C12.9681 14.7266 13.0081 14.7741 13.0531 14.8204L17.8654 19.6332C18.0998 19.8678 18.4178 19.9996 18.7493 19.9997C19.0809 19.9999 19.399 19.8682 19.6335 19.6338C19.8681 19.3994 19.9999 19.0815 20 18.7498C20.0001 18.4182 19.8685 18.1002 19.6341 17.8656L14.8218 13.0528C14.7771 13.0075 14.7291 12.967 14.6781 12.929ZM15.0006 8.12371C15.0006 9.0266 14.8227 9.92066 14.4773 10.7548C14.1318 11.589 13.6254 12.3469 12.987 12.9854C12.3486 13.6238 11.5907 14.1303 10.7567 14.4758C9.92258 14.8213 9.02862 14.9992 8.12582 14.9992C7.22301 14.9992 6.32905 14.8213 5.49497 14.4758C4.66089 14.1303 3.90302 13.6238 3.26464 12.9854C2.62626 12.3469 2.11987 11.589 1.77438 10.7548C1.4289 9.92066 1.25108 9.0266 1.25108 8.12371C1.25108 6.30022 1.97538 4.55142 3.26464 3.26203C4.55391 1.97263 6.30252 1.24825 8.12582 1.24825C9.94911 1.24825 11.6977 1.97263 12.987 3.26203C14.2763 4.55142 15.0006 6.30022 15.0006 8.12371Z"],[3,"click"],["class","absolute p-5 bg-white shadow-lg rounded-3xl w-[90%] top-24"],[1,"absolute","p-5","bg-white","shadow-lg","rounded-3xl","w-[90%]","top-24"],[1,"flex","justify-between","mb-4"],[1,"text-[--gris-texto]"],[1,"text-[--celeste]","pointer",3,"click"],[1,"flex","flex-wrap","gap-3"],[1,"pointer",3,"click"],["alt","",1,"w-[150px]","h-[100px]","object-cover","rounded-md",3,"src"],["class","pointer"]],template:function(n,o){if(n&1){let p=D();r(0,"div",0)(1,"div",1)(2,"label",2),l(3,"Pa\xEDs"),s(),r(4,"input",3,4),h("keyup",function(){P(p);let B=z(5);return I(o.onKeyPress(B.value))})("click",function(){return o.show()}),s()(),r(6,"div",5),V(),r(7,"svg",6),g(8,"path",7),s(),$(),r(9,"p",8),h("click",function(){P(p);let B=z(5);return I(o.onKeyPress(B.value))}),l(10,"Buscar"),s()(),f(11,de,9,0,"div",9),s()}n&2&&(a(11),L(11,o.showContinentes?11:-1))},dependencies:[S],styles:["[_nghost-%COMP%]{display:block}@media (max-width: 558px){.icon[_ngcontent-%COMP%]{display:none}}"]});let t=e;return t})();function ue(t,e){if(t&1&&(r(0,"p",12),l(1),s()),t&2){let c=e.$implicit;a(1),u(" ",c.name," ")}}function fe(t,e){if(t&1&&(r(0,"p",12),l(1),s()),t&2){let c=e.$implicit;a(1),u(" ",c," ")}}function he(t,e){if(t&1&&(r(0,"p",12),l(1),s()),t&2){let c=e.$implicit;a(1),u(" ",c," ")}}function ge(t,e){if(t&1&&(r(0,"p",12),l(1),s()),t&2){let c=e.$implicit;a(1),u(" ",c.name," ")}}var se=(()=>{let e=class e{constructor(){this.show=new q}closeDetalle(){this.show.emit(!1)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=w({type:e,selectors:[["detalle-pais"]],inputs:{paisItem:"paisItem"},outputs:{show:"show"},standalone:!0,features:[y],decls:35,vars:9,consts:[[1,"fixed","flex","flex-col","right-0","top-28","bg-white","bottom-0","w-[300px]","p-4"],[1,"w-full","text-end","self-end",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","black","viewBox","0 0 16 16",1,"bi","bi-x"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"],["alt","",1,"w-full","h-[200px]","object-cover","rounded-xl",3,"src"],[1,"flex"],[1,"p-4"],[1,"text-[--celeste]","font-bold","text-[20px]"],[1,"text-[--gris]","text-[18px]"],[1,"flex","flex-col","gap-3"],[1,"flex","gap-3","flex-wrap"],[1,"text-[18px]","text-[--celeste]","font-bold"],[1,"text-[18px]","text-[--gris-letra]"],["class","text-[18px] text-[--gris-letra]",4,"ngFor","ngForOf"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"div",1),h("click",function(){return o.closeDetalle()}),V(),r(2,"svg",2),g(3,"path",3),s()(),$(),g(4,"img",4),r(5,"div",5)(6,"p"),l(7),s(),r(8,"div",6)(9,"h1",7),l(10),s(),r(11,"p",8),l(12),s()()(),r(13,"div",9)(14,"div",10)(15,"p",11),l(16,"Capital:"),s(),r(17,"p",12),l(18),s()(),r(19,"div",10)(20,"p",11),l(21,"Language:"),s(),f(22,ue,2,1,"p",13),s(),r(23,"div",10)(24,"p",11),l(25,"Phones:"),s(),f(26,fe,2,1,"p",13),s(),r(27,"div",10)(28,"p",11),l(29,"Currency:"),s(),f(30,he,2,1,"p",13),s(),r(31,"div")(32,"p",11),l(33,"Region"),s(),f(34,ge,2,1,"p",13),s()()()),n&2&&(a(4),m("src",o.paisItem.imagen,T),a(3),u(" ",o.paisItem.emoji," "),a(3),H(o.paisItem.name),a(2),u(" ",o.paisItem.continent.name," "),a(6),u(" ",o.paisItem.capital," "),a(4),m("ngForOf",o.paisItem.languages),a(4),m("ngForOf",o.paisItem.phones),a(4),m("ngForOf",o.paisItem.currencies),a(4),m("ngForOf",o.paisItem.states))},dependencies:[S,N],styles:["[_nghost-%COMP%]{display:block}"]});let t=e;return t})();var R=(()=>{let e=class e{constructor(i){this.http=i,this.urlBase="https://pixabay.com/api/",this.key="41037390-fa082abba11ab88080452aff8"}searchImage(i){let n=new ee().set("key",this.key).set("q",i).set("image_type","photo").set("per_page",3);return this.http.get(this.urlBase,{params:n})}};e.\u0275fac=function(n){return new(n||e)(_(te))},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var K=(()=>{let e=class e{constructor(i,n){this.apollo=i,this.imageService=n}getPaises(i){return this.apollo.query({query:O`
      query GetCountriesByContinent($continentName: String!){
        countries(filter: { name: { regex: $continentName }}) {
          code,
          name,
          emoji,
          continent{
            name
          }
        }
      }`,variables:{continentName:i}}).pipe(F(n=>{let o=n.data.countries.map(p=>this.imageService.searchImage(p.name).pipe(j(d=>k(C({},p),{imagen:d.hits[0]?.webformatURL||""}))));return console.log(o),M(o)}))}getPaisesByContinente(i,n){return this.apollo.query({query:O`
      query GetCountriesByContinent($continentName: [String!], $nameCountry: String!) {
        countries(filter: { name: { regex:$nameCountry }, continent: { in: $continentName}}) {
          code,
          name,
          emoji,
          continent{
            name
          }
        }
      }`,variables:{continentName:n,nameCountry:i}}).pipe(F(o=>{let p=o.data.countries.map(d=>this.imageService.searchImage(d.name).pipe(j(B=>k(C({},d),{imagen:B.hits[0]?.webformatURL||""}))));return console.log(p),M(p)}))}getPais(i){return this.apollo.query({query:O`
      query GetCountryByCode($codeCountry: String!){
        countries(filter: { code: { eq: $codeCountry }}) {
          name,
          capital,
          continent {
            name
          },
          languages{
            name
          },
          currencies,
          emoji,
          phones,
          states{
            name
          }
        }
      }`,variables:{codeCountry:i}}).pipe(F(n=>{let o=n.data.countries.map(p=>this.imageService.searchImage(p.name).pipe(j(d=>k(C({},p),{imagen:d.hits[0]?.webformatURL||""}))));return console.log(o),M(o)}))}};e.\u0275fac=function(n){return new(n||e)(_(U),_(R))},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xe(t,e){if(t&1){let c=D();r(0,"detalle-pais",7),h("show",function(){P(c);let n=x();return I(n.toogleDetalle())}),s()}if(t&2){let c=x();m("paisItem",c.paisItem)}}var le=(()=>{let e=class e{constructor(i){this.paisesService=i,this.showDetalle=!1}toogleDetalle(){this.showDetalle=!this.showDetalle}mostrarPais(i){this.paisesService.getPais(i).subscribe(n=>{this.paisItem=n[0],console.log(n)}),this.toogleDetalle()}};e.\u0275fac=function(n){return new(n||e)(b(K))},e.\u0275cmp=w({type:e,selectors:[["paises-item"]],inputs:{pais:"pais"},standalone:!0,features:[y],decls:11,vars:8,consts:[[1,"card","bg-white","rounded-3xl","shadow-lg","pointer",3,"click"],[1,"w-full","h-[200px]","object-cover","rounded-t-3xl",3,"src","alt"],[1,"flex"],[1,"p-4"],[1,"text-[--celeste]","font-bold","text-[20px]"],[1,"text-[--gris]","text-[18px]"],[3,"paisItem","show",4,"ngIf"],[3,"paisItem","show"]],template:function(n,o){n&1&&(r(0,"div",0),h("click",function(){return o.mostrarPais(o.pais.code)}),g(1,"img",1),r(2,"div",2)(3,"p"),l(4),s(),r(5,"div",3)(6,"h1",4),l(7),s(),r(8,"p",5),l(9),s()()()(),f(10,xe,1,1,"detalle-pais",6)),n&2&&(Q("active",o.showDetalle),a(1),m("src",o.pais.imagen,T)("alt",o.pais.name),a(3),u(" ",o.pais.emoji," "),a(3),H(o.pais.name),a(2),u(" ",o.pais.continent.name," "),a(1),m("ngIf",o.showDetalle))},dependencies:[S,Y,se],styles:["[_nghost-%COMP%]{display:block}.active[_ngcontent-%COMP%]{background-color:var(--celeste);color:#fff}.active[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}"]});let t=e;return t})();var ce=(()=>{let e=class e{constructor(i,n){this.apollo=i,this.imageService=n}getContinentes(){return this.apollo.query({query:O`
      query {
        continents{
          code,
          name
        }
      }`}).pipe(F(i=>{let n=i.data.continents.map(o=>this.imageService.searchImage(o.name).pipe(j(p=>k(C({},o),{imagen:p.hits[0]?.webformatURL||""}))));return console.log(n),M(n)}))}};e.\u0275fac=function(n){return new(n||e)(_(U),_(R))},e.\u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _e(t,e){if(t&1&&g(0,"paises-item",5),t&2){let c=e.$implicit;m("pais",c)}}function we(t,e){if(t&1&&f(0,_e,1,1,"paises-item",4),t&2){let c=x();m("ngForOf",c.paises)}}function be(t,e){t&1&&(r(0,"p"),l(1,"No se encontraron resultados"),s())}var et=(()=>{let e=class e{constructor(i,n,o){this.paisesService=i,this.continentesService=n,this.filtrosPais=o,this.paises=[],this.continentes=[]}ngOnInit(){this.getContinentes(),this.filtrosPais.continente?.length===0?this.getPaises(this.filtrosPais.nombre||""):this.buscarContinente(this.filtrosPais.continente||[])}getPaises(i){this.paisesService.getPaises(i).subscribe(n=>{n&&(this.paises=n,console.log(n))})}getContinentes(){this.continentesService.getContinentes().subscribe(i=>{this.continentes=i})}buscarPais(i){this.filtrosPais.nombre=i,this.filtrosPais.continente.length===0?this.getPaises(i):this.buscarContinente(this.filtrosPais.continente)}buscarContinente(i){this.paisesService.getPaisesByContinente(this.filtrosPais.nombre||"",i).subscribe(n=>{this.paises=n,console.log(n)})}};e.\u0275fac=function(n){return new(n||e)(b(K),b(ce),b(G))},e.\u0275cmp=w({type:e,selectors:[["app-home-page"]],standalone:!0,features:[y],decls:5,vars:2,consts:[[1,"flex","items-center","flex-col","gap-5","justify-center","w-full"],[1,"w-[65%]",3,"continentes","onSearch","onSearchContinente"],[1,"grid-paises","w-full"],["class","w-full max-w-[350px]",3,"pais"],["class","w-full max-w-[350px]",3,"pais",4,"ngFor","ngForOf"],[1,"w-full","max-w-[350px]",3,"pais"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"shared-buscador",1),h("onSearch",function(d){return o.buscarPais(d)})("onSearchContinente",function(d){return o.buscarContinente(d)}),s(),r(2,"div",2),f(3,we,1,1,"paises-item",3)(4,be,2,0),s()()),n&2&&(a(1),m("continentes",o.continentes),a(2),L(3,o.paises.length>0?3:4))},dependencies:[S,N,ne,le],styles:["[_nghost-%COMP%]{display:block}.grid-paises[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:20px;justify-content:center;justify-items:center}"]});let t=e;return t})();export{et as default};
